
@if(candidate) {
<!-- <div class="m-auto min-w-80 max-w-4xl p-2 sm:p-6 md:p-8 dark:bg-gray-900 text-gray-800 dark:text-gray-200"> -->

  <form [formGroup]="form" (ngSubmit)="saveUser($event)">

    <!-- SECCIÓN DE INFORMACIÓN PERSONAL -->
    <!-- <h2 class="text-xl font-semibold text-center mt-2 mb-4 uppercase tracking-wider">
      Basic Informacion
    </h2> -->

    <!-- VISTA DE INFORMACIÓN PERSONAL (NO EDICIÓN) -->
    @if(editBasicInfo == false) {
    <!-- <div class="p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm"> -->
      <div class="flex justify-between items-start mb-4">
        <div class="text-lg font-medium">
          {{this.candidate.username}} {{this.candidate.lastname}}
        </div>
        <button type="button" (click)="changeEditPersonalInfo()"
          class="text-blue-600 dark:text-blue-400 hover:underline text-sm font-medium">
          Edit
        </button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-sm">
        <div>
          <span class="font-semibold">Email:</span> {{this.candidate.email}}
        </div>
        <div>
          <span class="font-semibold">Phone:</span> {{this.candidate.phone}}
        </div>
        <div>
          <span class="font-semibold">Birth date:</span> {{this.candidate.birthdate | date }}
        </div>
      </div>

      @if(this.candidate.optionalText){
      <div class="text-sm italic mt-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md">
        "{{ this.candidate.optionalText }}"
      </div>
      }
    <!-- </div> -->
    }

    <!-- FORMULARIO DE EDICIÓN DE INFORMACIÓN PERSONAL -->
    @if(editBasicInfo == true) {
    <!-- <div class="p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm"> -->
      <div class="grid gap-y-4 gap-x-6 mb-6 sm:grid-cols-2">

        <!-- First Name -->
        <div class="">
          <label for="firstname" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">{{ "candidate_profile.firstname" | transloco}}:</label>
          <input type="text" id="firstname" formControlName="firstname" placeholder="{{ 'candidate_profile.firstname' | transloco}}"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                 [class.border-green-500]="isfirstnameFieldValid" [class.border-red-500]="isfirstnameFieldInvalid">
          <div class="text-xs text-red-600 dark:text-red-400">
            @if (firstnameField?.hasError('maxlength')){ <span>No more than 30 letters</span> }
            @if (firstnameField?.hasError('required')){ <span>You must write something</span> }
            @if (firstnameField?.hasError('minlength')){ <span>At least 2 letters please</span> }
          </div>
        </div>

        <!-- Last Name -->
        <div class="">
          <label for="lastname" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">{{ 'candidate_profile.lastname' | transloco}}:</label>
          <input type="text" id="lastname" formControlName="lastname" placeholder="{{ 'candidate_profile.lastname' | transloco}}"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                 [class.border-green-500]="islastnameFieldValid" [class.border-red-500]="islastnameFieldInvalid">
           <div class="text-xs text-red-600 dark:text-red-400">
            @if (lastnameField?.hasError('maxlength')){ <span>No more than 30 letters</span> }
            @if (lastnameField?.hasError('minlength')){ <span>At Least 1 letter please</span> }
          </div>
        </div>

        <!-- Email -->
        <!-- <div class="sm:col-span-2">
          <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">Contact Email:</label>
          <input type="email" id="email" formControlName="email"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                 placeholder="john.doe@company.com" [class.border-green-500]="isemailFieldValid" [class.border-red-500]="isemailFieldInvalid">
          <div class="text-xs text-red-600 dark:text-red-400">
            @if (emailField?.hasError('email')){ <span>This is not a valid email</span> }
            @if (emailField?.hasError('required')){ <span>This input is required</span> }
            @if (emailField?.hasError('maxlength')){ <span>No more than 80 letters</span> }
          </div>
        </div> -->
          <!-- <div class="flex flex-row">
            <span class="font-semibold">Email:</span>
            {{this.candidate.email}}
          </div> -->

        <!-- Phone Number -->
        <div class="">
          <label for="phone" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">{{ 'candidate_profile.phone_number' | transloco}}:</label>
          <div class="relative">
            <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
              <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 19 18">
                <path d="M18 13.446a3.02 3.02 0 0 0-.946-1.985l-1.4-1.4a3.054 3.054 0 0 0-4.218 0l-.7.7a.983.983 0 0 1-1.39 0l-2.1-2.1a.983.983 0 0 1 0-1.389l.7-.7a2.98 2.98 0 0 0 0-4.217l-1.4-1.4a2.824 2.824 0 0 0-4.218 0c-3.619 3.619-3 8.229 1.752 12.979C6.785 16.639 9.45 18 11.912 18a7.175 7.175 0 0 0 5.139-2.325A2.9 2.9 0 0 0 18 13.446Z" />
              </svg>
            </div>
            <input type="tel" id="phone" formControlName="phone"
                   class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                   placeholder="{{ 'candidate_profile.phone_number_placeholder' | transloco}}"
                   [class.border-green-500]="isphoneFieldValid" [class.border-red-500]="isphoneFieldInvalid">
          </div>
          <div class="text-xs text-red-600 dark:text-red-400">
            @if (phoneField?.hasError('minlength')){ <span>At least 9 numbers</span> }
            @if (phoneField?.hasError('maxlength')){ <span>No more than 15 numbers</span> }
            @if (phoneField?.hasError('pattern')){ <span>Only numbers!</span> }
          </div>
        </div>

        <!-- City -->
        <div class="">
          <label for="city" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">{{ 'candidate_profile.city' | transloco}}:</label>
          <input type="text" id="city" formControlName="city"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                 [class.border-green-500]="iscityFieldValid" [class.border-red-500]="iscityFieldInvalid">
        <div class="text-xs text-red-600 dark:text-red-400">
        </div>
        </div>


        <!-- Provincia State -->
        <div class="">
          <label for="city" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">{{ 'candidate_profile.state' | transloco}}:</label>
          <input type="text" id="state" formControlName="state"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
        <div class="text-xs text-red-600 dark:text-red-400">
        </div>
        </div>

        <!-- ZIP Code -->
        <!-- <div class="sm:col-span-1">
          <label for="zipCode" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">ZIP code:</label>
          <div class="relative">
             <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 20">
                    <path d="M8 0a7.992 7.992 0 0 0-6.583 12.535 1 1 0 0 0 .12.183l.12.146c.112.145.227.285.326.4l5.245 6.374a1 1 0 0 0 1.545-.003l5.092-6.205c.206-.222.4-.455.578-.7l.127-.155a.934.934 0 0 0 .122-.192A8.001 8.001 0 0 0 8 0Zm0 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"/>
                </svg>
            </div>
            <input type="tel" id="zipCode" formControlName="zipCode"
                   class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                   placeholder="12345" [class.border-green-500]="iszipCodeFieldValid" [class.is-invalid]="iszipCodeFieldInvalid">
          </div>
          <div class="text-xs text-red-600 dark:text-red-400">
            @if (zipCodeField?.hasError('minlength')){<span>At least 5 characters</span> }
            @if (zipCodeField?.hasError('maxlength')){<span>No more than 8 characters</span> }
          </div>
        </div> -->

      </div>

      <div class="flex justify-end mt-8">
        <button [disabled]="form.invalid" [class.opacity-50]="form.invalid" [class.cursor-not-allowed]="form.invalid" type="submit"
                class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
          {{ 'candidate_profile.continue' | transloco}}
        </button>
      </div>

    <!-- </div> -->
    }

    <!-- SECCIÓN DE DIRECCIÓN DE ENVÍO -->
    <!-- <h2 class="text-xl font-semibold text-center mt-12 mb-4 uppercase tracking-wider">
      Extra Address
    </h2> -->

    <!-- VISTA DE DIRECCIÓN DE ENVÍO (NO EDICIÓN) -->
    <!-- @if(editShipping == false) {
    <div class="p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm">
        <div class="flex justify-between items-start mb-2">
            <div class="text-sm">
                <p class="font-semibold">{{this.candidate.username}} {{this.candidate.lastname}}</p>
                <p>{{this.candidate.address}}</p>
                @if(this.candidate.addressExtra) {
                    <p>{{this.candidate.addressExtra}}</p>
                }
                <p>{{this.candidate.city}}@if(this.candidate.city && this.candidate.state){,}{{this.candidate.state}}</p>
                <p>{{this.candidate.zipCode}}</p>
            </div>
             <button type="button" (click)="changeEditShipping()" class="text-blue-600 dark:text-blue-400 hover:underline text-sm font-medium">
                Edit
            </button>
        </div>
    </div>
    } -->

    <!-- FORMULARIO DE EDICIÓN DE DIRECCIÓN DE ENVÍO -->
    @if(editShipping == true) {
    <div class="p-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm">
      <div class="grid gap-y-4 gap-x-6 mb-6 sm:grid-cols-2">

        <!-- Address 1 -->
        <div class="sm:col-span-2">
          <label for="address" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">Address 1:</label>
          <input type="text" id="address" formControlName="address"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
           <div class="text-xs text-red-600 dark:text-red-400">
            @if (addressField?.hasError('minlength')){<span>At least 8 characters</span> }
          </div>
        </div>

        <!-- Address 2 -->
        <!-- <div class="sm:col-span-2">
          <label for="addressExtra" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">Address 2 (Optional):</label>
          <input type="text" id="addressExtra" formControlName="addressExtra"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
        </div> -->

        <!-- Birthday -->
        <div class="sm:col-span-1">
          <label for="birthdate" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">Birthday:</label>
          <input type="date" id="birthdate" formControlName="birthdate"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
          <div class="h-4"></div>
        </div>

        <!-- City -->
        <div class="sm:col-span-1">
          <label for="city" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">City:</label>
          <input type="text" id="city" formControlName="city"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
        </div>

        <!-- Provincia State -->
        <div class="sm:col-span-1">
          <label for="city" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">Provincia:</label>
          <input type="text" id="state" formControlName="state"
                 class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
        </div>

        <!-- State -->
        <!-- <div class="sm:col-span-1">
          <label for="state" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">Provincia:</label>
          <select id="state" formControlName="state"
                  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
            <option value=""></option>
            <option>Alabama</option> <option>Alaska</option> <option>Arizona</option>
            <option>Arkansas</option> <option>California</option> <option>Colorado</option>
            <option>Connecticut</option> <option>Delaware</option> <option>Florida</option>
            <option>Georgia</option> <option>Hawaii</option> <option>Idaho</option>
            <option>Illinois</option> <option>Indiana</option> <option>Iowa</option>
            <option>Kansas</option> <option>Kentucky</option> <option>Louisiana</option>
            <option>Maine</option> <option>Maryland</option> <option>Massachusetts</option>
            <option>Michigan</option> <option>Minnesota</option> <option>Mississippi</option>
            <option>Missouri</option> <option>Montana</option> <option>Nebraska</option>
            <option>Nevada</option> <option>New Hampshire</option> <option>New Jersey</option>
            <option>New Mexico</option> <option>New York</option> <option>North Carolina</option>
            <option>North Dakota</option> <option>Ohio</option> <option>Oklahoma</option>
            <option>Oregon</option> <option>Pennsylvania</option> <option>Rhode Island</option>
            <option>South Carolina</option> <option>South Dakota</option> <option>Tennessee</option>
            <option>Texas</option> <option>Utah</option> <option>Vermont</option>
            <option>Virginia</option> <option>Washington</option> <option>West Virginia</option>
            <option>Wisconsin</option> <option>Wyoming</option>
          </select>
        </div> -->

        <!-- ZIP Code -->
        <div class="sm:col-span-1">
          <label for="zipCode" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-200">ZIP code:</label>
          <div class="relative">
             <div class="absolute inset-y-0 start-0 flex items-center ps-3.5 pointer-events-none">
                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 20">
                    <path d="M8 0a7.992 7.992 0 0 0-6.583 12.535 1 1 0 0 0 .12.183l.12.146c.112.145.227.285.326.4l5.245 6.374a1 1 0 0 0 1.545-.003l5.092-6.205c.206-.222.4-.455.578-.7l.127-.155a.934.934 0 0 0 .122-.192A8.001 8.001 0 0 0 8 0Zm0 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"/>
                </svg>
            </div>
            <input type="tel" id="zipCode" formControlName="zipCode"
                   class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                   placeholder="12345" [class.border-green-500]="iszipCodeFieldValid" [class.is-invalid]="iszipCodeFieldInvalid">
          </div>
          <div class="text-xs text-red-600 dark:text-red-400">
            @if (zipCodeField?.hasError('minlength')){<span>At least 5 characters</span> }
            @if (zipCodeField?.hasError('maxlength')){<span>No more than 8 characters</span> }
          </div>
        </div>
      </div>

       <div class="flex justify-end mt-6">
        <button [disabled]="form.invalid" [class.opacity-50]="form.invalid" [class.cursor-not-allowed]="form.invalid" type="submit"
                class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
          Save Changes
        </button>
      </div>

    </div>
    }

  </form>

<!-- </div> -->
}
